# 2025秋季学期-数据结构 Lab9

> 负责助教：于海涛



## Lab说明

- 请使用**C++或Java**完成本课程的Lab编写（如果使用Python等其他语言，在批阅时会酌情扣分）。
- 由于**本课程的Lab将以测试用例的通过情况作为最终评分的主要依据**，因此请预先注册洛谷（https://www.luogu.com.cn）账号，用户名统一命名为**姓名的小写字母缩写\_学号**，**例如张三同学的用户名为zs_1234567890**。用户名只有一次修改机会，若本步骤出错请更换其他邮箱重新注册账号。
- **Lab提交**：
  1. 将代码打包成**.zip压缩包**，命名格式为**学号\_姓名\_Lab9.zip**，上传至elearning平台
  2. 通过本次Lab的洛谷链接加入比赛，提交并运行每道题，**请确保你已经在洛谷平台上使用测试用例进行过评分**。
  3. 准确完成上述两项内容后，本次Lab计为有效。
- **Lab评分**主要包含三个维度，请注意：
  1. 洛谷平台对应每道题目的得分（主要评分依据）
  2. 代码关键环节提供**适当的代码注释**
  3. 代码风格是否格式整洁、具有良好可读性
- 切勿抄袭！若检测到代码/注释存在雷同，一经查实，双方均按零分处理。
- **本次Lab截止日期为2025年12月15日23:59**。

> 本次Lab的洛谷链接：https://www.luogu.com.cn/contest/277701
> 邀请码：6lsr



## 题目清单

### 1. 二分查找

#### 题目描述

给定一个**升序排列**的整数序列（下标从 $0$ 开始），请你使用**二分查找算法**在序列中查找一个给定的值 $x$，并输出它在序列中**第一次出现的下标**。

> 注意：题目要求必须使用**二分查找算法**实现（不能直接暴力遍历搜索）。

#### 输入格式

第一行包含一个正整数 $n$，表示序列中元素的个数；

第二行包含 $n$ 个升序排列的整数，相邻两个整数之间用单个空格隔开；

第三行包含一个整数 $x$，表示要查找的目标值。

#### 输出格式

输出 $x$ 第一次出现的下标。

若不存在该值，则输出 `-1`。

#### 输入输出样例

##### 输入 #1

```
6
1 3 3 5 7 9
3
```

##### 输出 #1

```
1
```

##### 输入 #2

```
12
-20 -5 -5 -5 0 1 1 3 3 4 7 7
-5
```

##### 输出 #2

```
1
```

#### 提示说明

$1 \le n \le 10^5，\lvert x \rvert \le 10^5$。

#### Hint

- 注意数据范围。
- 可能需要额外考虑查找的目标值是否为第一次出现。



### 2. 图书馆管理员

#### 题目描述

某大型图书馆设计了一种**高效的信息检索系统**。

每一本书都有一个**唯一的**编号，系统会根据书籍编号建立一棵**信息检索树**，以加快查找速度。

这种树遵循以下规则：

- 每个节点存储一个**唯一的**书籍编号；
- 若新编号**小于**当前节点编号，则插入到左子树；
- 若新编号**大于**当前节点编号，则插入到右子树。

图书馆的管理员在录入完所有书籍后，想通过系统快速定位一本特定编号的书。

然而，为了节约内存，系统设定只会返回该书在树中的**层数**，而不是完整路径。

#### 题目描述

你现在是该图书馆的管理员，请你模拟该图书馆信息检索系统的构建与查找过程。

#### 输入格式

第一行包含一个整数 $n$，表示录入的书籍数量；

第二行包含 $n$ 个整数，表示书籍编号 $i$ 的插入顺序；

第三行包含一个整数 $x$，表示要查找的书籍编号。

#### 输出格式

首先在插入过程中，**每当书籍编号 $i$ 在检索树中已经存在则不允许重复插入**，并输出一行 `ERROR` ；

最后输出一个整数：

- 若编号存在，输出其在信息检索树中的**层数**（根节点为第 1 层）；
- 否则输出 `-1`。

#### 输入输出样例

##### 输入 #1

```
7
50 30 70 20 40 60 80
60
```

##### 输出 #1

```
3
```

##### 输入 #2

```
5
8 3 10 1 6
2
```

##### 输出 #2

```
-1
```

##### 输入 #3

```
0

1
```

##### 输出 #3

```
-1
```

#### 提示说明

$0 \le n, i, x \le 10^4$。

#### Hint

记得处理一些特殊情况：

- 查找目标不存在
- 树为空（$n = 0$ 时查找任何编号均会查找失败）
- 重复值插入（输入序列可能包含重复值，但树中节点不会重复）
- …………



